---
interface Props {
  currentPath?: string;
}

const { currentPath = '/' } = Astro.props;

const navLinks = [
  { href: '/services', label: 'Services' },
  { href: '/pricing', label: 'Pricing' },
  { href: '/about', label: 'About' },
  { href: '/blog', label: 'Blog' },
  { href: '/faq', label: 'FAQ' },
  { href: '/contact', label: 'Contact' },
];
---

<header class="fixed top-0 left-0 right-0 z-50">
  <!-- Gradient blur backdrop -->
  <div class="absolute inset-0 bg-gradient-to-b from-[var(--color-deep-navy)] via-[var(--color-deep-navy)]/95 to-transparent backdrop-blur-xl"></div>

  <nav class="relative max-w-7xl mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="/" class="relative group">
        <img
          src="/sparkhost-light.svg"
          alt="SparkHost"
          class="h-10 w-auto transition-transform duration-300 group-hover:scale-105"
        />
        <!-- Glow effect on hover -->
        <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 blur-xl bg-gradient-to-r from-[var(--color-spark-red)]/20 to-[var(--color-spark-orange)]/20 -z-10"></div>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center gap-1">
        {navLinks.map((link) => (
          <a
            href={link.href}
            class:list={[
              "relative px-4 py-2 font-medium text-sm transition-all duration-300",
              currentPath === link.href
                ? "text-white"
                : "text-white/60 hover:text-white"
            ]}
          >
            {link.label}
            {currentPath === link.href && (
              <span class="absolute bottom-0 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-[var(--color-spark-red)] shadow-[0_0_8px_var(--color-spark-red)]"></span>
            )}
            <span class="absolute inset-0 rounded-lg bg-white/0 hover:bg-white/5 transition-colors duration-300"></span>
          </a>
        ))}
      </div>

      <!-- CTA Button -->
      <div class="hidden lg:flex items-center gap-4">
        <a href="/get-started" class="btn-spark text-sm py-2.5 px-5" title="Start your managed WordPress hosting">
          <span>Get Started</span>
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg>
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-btn"
        class="lg:hidden relative p-2 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors"
        aria-label="Toggle menu"
      >
        <div class="w-5 h-4 flex flex-col justify-between" id="hamburger">
          <span class="block h-0.5 w-full bg-white rounded-full transition-transform origin-center"></span>
          <span class="block h-0.5 w-full bg-white rounded-full transition-opacity"></span>
          <span class="block h-0.5 w-full bg-white rounded-full transition-transform origin-center"></span>
        </div>
      </button>
    </div>
  </nav>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="lg:hidden fixed inset-x-0 top-[72px] bottom-0 bg-[var(--color-deep-navy)]/98 backdrop-blur-2xl translate-x-full transition-transform duration-500 ease-out"
  >
    <div class="flex flex-col p-6 gap-2">
      {navLinks.map((link, i) => (
        <a
          href={link.href}
          class="group relative py-4 px-4 text-xl font-medium text-white/70 hover:text-white transition-all duration-300 border-b border-white/5"
          style={`transition-delay: ${i * 50}ms`}
        >
          <span class="relative z-10">{link.label}</span>
          <div class="absolute inset-0 bg-gradient-to-r from-[var(--color-spark-red)]/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity rounded-lg"></div>
        </a>
      ))}

      <a href="/get-started" class="btn-spark mt-6 justify-center text-lg py-4" title="Start your managed WordPress hosting">
        <span>Get Started</span>
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
        </svg>
      </a>
    </div>
  </div>
</header>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const hamburger = document.getElementById('hamburger');
  let isOpen = false;

  menuBtn?.addEventListener('click', () => {
    isOpen = !isOpen;

    if (isOpen) {
      mobileMenu?.classList.remove('translate-x-full');
      mobileMenu?.classList.add('translate-x-0');
      // Animate hamburger to X
      const spans = hamburger?.querySelectorAll('span');
      if (spans) {
        spans[0].style.transform = 'translateY(7px) rotate(45deg)';
        spans[1].style.opacity = '0';
        spans[2].style.transform = 'translateY(-7px) rotate(-45deg)';
      }
    } else {
      mobileMenu?.classList.remove('translate-x-0');
      mobileMenu?.classList.add('translate-x-full');
      // Reset hamburger
      const spans = hamburger?.querySelectorAll('span');
      if (spans) {
        spans[0].style.transform = '';
        spans[1].style.opacity = '1';
        spans[2].style.transform = '';
      }
    }
  });
</script>
